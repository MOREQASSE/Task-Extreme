<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="theme-color" content="#4a90e2"/>
  <meta name="description" content="A powerful task management application with offline capabilities">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="TaskExtreme">
  <link rel="manifest" href="/manifest.json">
  <link rel="icon" href="images/icon.png" type="image/png">
  <link rel="apple-touch-icon" href="images/icon.png">
  <title>TaskExtreme</title>
  <link rel="icon" type="image/png" href="images/icon.png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="./styles/main.css"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script> <!--PDF generation js library-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.29/jspdf.plugin.autotable.min.js"></script><!--PDF Tables and rows formation js library-->
  <script type="module" src="/js/offline.js"></script>
  <style>
    html {
        scroll-behavior: smooth;
    }
    .styled-upload {
        display: flex;
        align-items: center;
        border: 2px dashed #bbb;
        border-radius: 8px;
        padding: 10px 16px;
        background: #fafbfc;
        cursor: pointer;
        transition: border-color 0.2s;
        margin-bottom: 8px;
    }
    .styled-upload.dragover {
        border-color: #007bff;
        background: #e6f0ff;
    }
    .file-upload-icon {
        font-size: 1.5em;
        margin-right: 12px;
    }
    .file-upload-input {
        display: none;
    }
    .file-upload-text {
        flex: 1;
    }
    .file-name {
        font-weight: 500;
        color: #333;
    }
    .file-hint {
        font-size: 0.9em;
        color: #888;
    }
    
    /* Theme Showcase */
    .theme-showcase {
        width: 100%;
        max-width: 1200px;
        margin: 2rem auto;
        text-align: center;
    }
    
    .theme-showcase img {
        max-width: 100%;
        height: auto;
        margin: 0 auto;
    }
    
    .theme-desktop {
        display: block;
    }
    
    .theme-mobile {
        display: none;
    }
    
    @media (max-width: 768px) {
        .theme-desktop {
            display: none;
        }
        .theme-mobile {
            display: block;
        }
    }
</style>
</head>
<body>
    <!-- Top Navigation -->
    <nav class="topnav">
        <a class="active" href="#home">
            <i class="fas fa-home"></i>
            <span class="nav-text">Home</span>
        </a>
        <a href="#progress-dashboard-section">
            <i class="fas fa-chart-bar"></i>
            <span class="nav-text">Dashboard</span>
        </a>
        <a href="#task-form-section">
            <i class="fas fa-plus-circle"></i>
            <span class="nav-text">New Task</span>
        </a>
        <a href="#calendar-section">
            <i class="far fa-calendar-alt"></i>
            <span class="nav-text">Calendar</span>
        </a>
        <a href="#tools-section">
            <i class="fas fa-tools"></i>
            <span class="nav-text">Tools</span>
        </a>
        <a href="#donate-section" class="donate-nav">
            <i class="fas fa-heart"></i>
            <span class="nav-text">Donate</span>
        </a>
    </nav>
    
    <!-- Streak Counter -->
    <div class="streak-counter" id="streak-counter"></div>
    
    
    <!-- Hero Section -->
    <section id="hero-section" class="hero-section">
        <div class="hero-container">
            <div class="hero-image">
                <img src="images/tasks laptop mockup.png" alt="TaskExtreme on a laptop">
            </div>
            <div class="hero-content">
                <h1 class="hero-title">All your tasks, perfectly organized</h1>
                <p class="hero-subtitle">TaskExtreme helps you stay focused and productive with a powerful set of features designed for modern task management.</p>
                <ul class="hero-features">
                    <li><i class="fas fa-tasks"></i><span><b>Task Management:</b> Seamlessly export and import your tasks.</span></li>
                    <li><i class="far fa-file-pdf"></i><span><b>PDF Generation:</b> Create professional PDF summaries of your tasks.</span></li>
                    <li><i class="fas fa-clock"></i><span><b>Focus Mode:</b> Employ the Pomodoro technique to stay on track.</span></li>
                    <li><i class="far fa-calendar-alt"></i><span><b>Integrated Calendar:</b> Visualize your schedule with a built-in calendar.</span></li>
                    <li><i class="fas fa-map-signs"></i><span><b>Day Navigation:</b> Intuitively navigate through your days.</span></li>
                </ul>
            </div>
        </div>
        <div class="hero-container hero-container-reverse">
            <div class="hero-content">
                <h1 class="hero-title">Visualize your progress</h1>
                <p class="hero-subtitle">The dashboard provides a clear overview of your productivity with insightful graphs and achievements.</p>
                <ul class="hero-features">
                    <li><i class="fas fa-chart-line"></i><span><b>Weekly Graphs:</b> Track your task completion throughout the week.</span></li>
                    <li><i class="fas fa-trophy"></i><span><b>Achievements:</b> Unlock achievements for your hard work and consistency.</span></li>
                    <li><i class="fas fa-spinner"></i><span><b>Progress Overview:</b> See your daily and weekly progress at a glance.</span></li>
                </ul>
            </div>
            <div class="hero-image">
                <img src="images/dashboard mobile mockup.png" alt="TaskExtreme Dashboard on mobile">
            </div>
        </div>
        
        <!-- Theme Showcase -->
        <div class="theme-showcase">
            <img src="images/9 themes pc.png" alt="TaskExtreme Themes on Desktop" class="theme-desktop">
            <img src="images/9 themes mobile.png" alt="TaskExtreme Themes on Mobile" class="theme-mobile">
        </div>
    </section>
<!-- Main Navigation Bar -->
    <header class="navbar">
        <div class="navbar-content">
            <!-- Logo -->
            <div class="navbar-left">
                <img src="images/icon.png" alt="TaskExtreme Logo" class="logo-icon" style="height: 4em; vertical-align: middle;" />
                <!-- Connection status hidden Idk when I put it back hihi
                <div id="connection-status" class="connection-status" title="Connection status">
                    <i class="fas fa-wifi"></i> Online
                </div>
                -->
            </div>
            
            <!-- Date Navigation -->
            <div class="navbar-center">
                <button id="prev-week" class="week-nav-btn" title="Previous Day">
                    <span class="nav-icon">‚Üê</span>
                </button>
                <button id="today-btn" class="today-btn" title="Go to Today">
                    <span class="today-text">Today</span>
                </button>
                <div class="date-display" id="current-date-display"></div>
                <button id="next-week" class="week-nav-btn" title="Next Day">
                    <span class="nav-icon">‚Üí</span>
                </button>
            </div>
            
            <!-- Action Buttons -->
            <div class="navbar-right">
                 <!--<div class="templates-dropdown">
                    <button id="templates-dropdown-btn" class="action-btn templates-btn" title="Quick Add from Template">
                        <span class="btn-icon"><i class="far fa-clipboard"></i></span>
                        <span class="btn-text">Templates</span>
                        <span class="dropdown-arrow">‚ñº</span>
                    </button>
                    <div id="templates-dropdown-menu" class="templates-dropdown-menu" style="display:none;">
                       
                        <div class="templates-list" id="templates-list"></div>
                        <a href="templates.html" class="manage-templates-link">Manage Templates‚Ä¶</a>
                    </div>
                </div> -->
                
                <div class="theme-dropdown">
                    <button id="theme-dropdown-btn" class="theme-dropdown-btn" title="Select Theme">
                        <span class="btn-text">Light Mode</span>
                        <span class="dropdown-arrow">‚ñº</span>
                    </button>
                    <div id="theme-dropdown-menu" class="theme-dropdown-menu">
                        <div class="theme-option" data-theme="light">
                            <span class="theme-icon"><i class="fas fa-sun"></i></span>
                            <span class="theme-name">Light Mode</span>
                            <span class="theme-description">Classic light</span>
                        </div>
                        <div class="theme-option" data-theme="dark">
                            <span class="theme-icon"><i class="fas fa-moon"></i></span>
                            <span class="theme-name">Dark Mode</span>
                            <span class="theme-description">Classic dark</span>
                        </div>
                        <div class="theme-option" data-theme="sunset">
                            <span class="theme-icon"><i class="fas fa-sunset"></i></span>
                            <span class="theme-name">Sunset Ocean</span>
                            <span class="theme-description">Warm orange</span>
                        </div>
                        <div class="theme-option" data-theme="forest">
                            <span class="theme-icon"><i class="fas fa-tree"></i></span>
                            <span class="theme-name">Forest Nature</span>
                            <span class="theme-description">Green fresh</span>
                        </div>
                        <div class="theme-option" data-theme="galaxy">
                            <span class="theme-icon"><i class="fas fa-stars"></i></span>
                            <span class="theme-name">Purple Galaxy</span>
                            <span class="theme-description">Cosmic purple</span>
                        </div>
                        <div class="theme-option" data-theme="minimalist">
                            <span class="theme-icon"><i class="far fa-circle"></i></span>
                            <span class="theme-name">Minimalist Gray</span>
                            <span class="theme-description">Clean gray</span>
                        </div>
                        <div class="theme-option" data-theme="retro">
                            <span class="theme-icon"><i class="fas fa-gamepad"></i></span>
                            <span class="theme-name">Retro 80s</span>
                            <span class="theme-description">Vintage vibes</span>
                        </div>
                        <div class="theme-option" data-theme="coffee">
                            <span class="theme-icon"><i class="fas fa-coffee"></i></span>
                            <span class="theme-name">Coffee Warm</span>
                            <span class="theme-description">Cozy brown</span>
                        </div>
                        <div class="theme-option" data-theme="girly">
                            <span class="theme-icon"><i class="fas fa-heart"></i></span>
                            <span class="theme-name">Girly Pink</span>
                            <span class="theme-description">Sweet pink</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Progress Dashboard Section -->
        <section id="progress-dashboard-section" class="card-section">
            <div class="section-header">
                <h2><span class="section-icon"><i class="fas fa-chart-bar"></i></span> Progress Dashboard</h2>
                <div class="dashboard-controls">
                    <button id="refresh-dashboard" class="dashboard-refresh-btn" title="Refresh Dashboard">
                        <span class="refresh-icon"><i class="fas fa-sync-alt"></i></span>
                    </button>
                    <button class="section-toggle collapsed" data-section="progress-dashboard">
                        <span class="toggle-arrow">‚ñ∂</span>
                    </button>
                </div>
            </div>
            <div class="section-content collapsed" id="progress-dashboard-content">
                <!-- Dashboard Overview -->
                <div class="dashboard-overview">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon"><i class="fas fa-check-circle"></i></div>
                            <div class="stat-content">
                                <div class="stat-number" id="completed-today">0</div>
                                <div class="stat-label">Completed Today</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon"><i class="fas fa-clipboard-list"></i></div>
                            <div class="stat-content">
                                <div class="stat-number" id="total-today">0</div>
                                <div class="stat-label">Total Today</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon"><i class="fas fa-bullseye"></i></div>
                            <div class="stat-content">
                                <div class="stat-number" id="completion-rate">0%</div>
                                <div class="stat-label">Completion Rate</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon"><i class="fas fa-fire"></i></div>
                            <div class="stat-content">
                                <div class="stat-number" id="current-streak">0</div>
                                <div class="stat-label">Day Streak</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Progress Charts -->
                <div class="charts-section">
                    <div class="chart-container">
                        <h3><i class="fas fa-chart-line"></i> Weekly Progress</h3>
                        <div class="weekly-chart" id="weekly-chart">
                            <div class="chart-bars">
                                <div class="chart-bar" data-day="Mon" data-value="0">
                                    <div class="bar-fill"></div>
                                    <div class="bar-label">Mon</div>
                                </div>
                                <div class="chart-bar" data-day="Tue" data-value="0">
                                    <div class="bar-fill"></div>
                                    <div class="bar-label">Tue</div>
                                </div>
                                <div class="chart-bar" data-day="Wed" data-value="0">
                                    <div class="bar-fill"></div>
                                    <div class="bar-label">Wed</div>
                                </div>
                                <div class="chart-bar" data-day="Thu" data-value="0">
                                    <div class="bar-fill"></div>
                                    <div class="bar-label">Thu</div>
                                </div>
                                <div class="chart-bar" data-day="Fri" data-value="0">
                                    <div class="bar-fill"></div>
                                    <div class="bar-label">Fri</div>
                                </div>
                                <div class="chart-bar" data-day="Sat" data-value="0">
                                    <div class="bar-fill"></div>
                                    <div class="bar-label">Sat</div>
                                </div>
                                <div class="chart-bar" data-day="Sun" data-value="0">
                                    <div class="bar-fill"></div>
                                    <div class="bar-label">Sun</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="chart-container">
                        <h3><i class="fas fa-tags"></i> Category Breakdown</h3>
                        <div class="category-chart" id="category-chart">
                            <div class="category-items">
                                <!-- Category items will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Achievements Section -->
                <div class="achievements-section">
                    <h3><i class="fas fa-trophy"></i> Recent Achievements</h3>
                    <div class="achievements-grid" id="achievements-grid">
                        <!-- Achievements will be populated by JavaScript -->
                    </div>
                </div>

                <!-- Productivity Tips -->
                <div class="productivity-tips">
                    <h3><i class="fas fa-lightbulb"></i> Productivity Tips</h3>
                    <div class="tips-container" id="productivity-tips">
                        <!-- Tips will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Task Form Section -->
        <section id="task-form-section" class="card-section">
            <div class="section-header">
                <h2><span class="section-icon"><i class="fas fa-tasks"></i></span> Add New Task</h2>
                <button class="section-toggle collapsed" data-section="task-form">
                    <span class="toggle-arrow">‚ñ∂</span>
                </button>
            </div>
            <div class="section-content collapsed" id="task-form-content">
                <form id="task-form">
                    <!-- Task Details Section -->
                    <div class="form-section">
                        <h3>Task Information</h3>
                        <div class="form-row">
                            <label for="task-title">Task Title *</label>
                            <input type="text" id="task-title" placeholder="What needs to be done?" required />
                        </div>
                        <div class="form-row">
                            <label for="task-details">Description</label>
                            <textarea id="task-details" placeholder="Add any additional details, notes, or context..."></textarea>
                        </div>
                    </div>

                    <!-- Category & Priority Section -->
                    <div class="form-section">
                        <h3><i class="fas fa-tags"></i> Category & Priority</h3>
                        <div class="form-row category-priority-row">
                            <div class="category-group">
                                <label for="task-category">Category</label>
                                <select id="task-category" required>
                                    <option value="">Select a category</option>
                                    <option value="work" data-color="#3b82f6" data-icon="fa-briefcase">Work</option>
                                    <option value="personal" data-color="#10b981" data-icon="fa-user">Personal</option>
                                    <option value="health" data-color="#ef4444" data-icon="fa-heartbeat">Health</option>
                                    <option value="education" data-color="#8b5cf6" data-icon="fa-graduation-cap">Education</option>
                                    <option value="finance" data-color="#f59e0b" data-icon="fa-money-bill-wave">Finance</option>
                                    <option value="home" data-color="#06b6d4" data-icon="fa-home">Home</option>
                                    <option value="social" data-color="#ec4899" data-icon="fa-users">Social</option>
                                    <option value="hobby" data-color="#84cc16" data-icon="fa-paint-brush">Hobby</option>
                                </select>
                            </div>
                            <div class="priority-group">
                                <label for="task-priority">Priority</label>
                                <select id="task-priority" required>
                                    <option value="" data-icon="fa-flag">Select priority</option>
                                    <option value="high" data-color="#ef4444" data-icon="fa-flag" data-icon-color="red">High</option>
                                    <option value="medium" data-color="#f59e0b" data-icon="fa-flag" data-icon-color="#f59e0b">Medium</option>
                                    <option value="low" data-color="#10b981" data-icon="fa-flag" data-icon-color="#10b981">Low</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Time & Date Section -->
                    <div class="form-section">
                        <h3>‚è∞ Time & Date</h3>
                        <div class="form-row time-row">
                            <div class="time-group">
                                <label for="task-time-start">Start Time</label>
                                <input type="time" id="task-time-start" />
                            </div>
                            <div class="time-separator">to</div>
                            <div class="time-group">
                                <label for="task-time-end">End Time</label>
                                <input type="time" id="task-time-end" />
                            </div>
                        </div>
                        <div class="form-row">
                            <label for="task-due-date">Due Date</label>
                            <input type="date" id="task-due-date" />
                        </div>
                    </div>

                    <!-- Scheduling Section -->
                    <div class="form-section">
                        <h3><i class="far fa-calendar-alt"></i> Scheduling</h3>
                        <div class="scheduling-options">
                            <div class="option-group">
                                <label class="option-label">
                                    <input type="radio" name="schedule-type" value="once" checked />
                                    <span class="option-text">
                                        <span class="option-icon"><i class="fas fa-thumbtack"></i></span>
                                        <span class="option-content">
                                            <strong>One-time task</strong>
                                            <small>Add to current date</small>
                                        </span>
                                    </span>
                                </label>
                            </div>
                            
                            <div class="option-group">
                                <label class="option-label">
                                    <input type="radio" name="schedule-type" value="everyday" />
                                    <span class="option-text">
                                        <span class="option-icon"><i class="fas fa-sync-alt"></i></span>
                                        <span class="option-content">
                                            <strong>Daily repeat</strong>
                                            <small>Every day</small>
                                        </span>
                                    </span>
                                </label>
                            </div>
                            
                            <div class="option-group">
                                <label class="option-label">
                                    <input type="radio" name="schedule-type" value="custom" />
                                    <span class="option-text">
                                        <span class="option-icon">üìã</span>
                                        <span class="option-content">
                                            <strong>Custom repeat</strong>
                                            <small>Select specific days</small>
                                        </span>
                                    </span>
                                </label>
                            </div>
                        </div>
                        
                        <div id="custom-days-section" class="custom-days-section" style="display: none;">
                            <label class="section-label">Repeat on:</label>
                            <div class="days-grid">
                                <label class="day-checkbox">
                                    <input type="checkbox" value="0" />
                                    <span class="day-label">Mon</span>
                                </label>
                                <label class="day-checkbox">
                                    <input type="checkbox" value="1" />
                                    <span class="day-label">Tue</span>
                                </label>
                                <label class="day-checkbox">
                                    <input type="checkbox" value="2" />
                                    <span class="day-label">Wed</span>
                                </label>
                                <label class="day-checkbox">
                                    <input type="checkbox" value="3" />
                                    <span class="day-label">Thu</span>
                                </label>
                                <label class="day-checkbox">
                                    <input type="checkbox" value="4" />
                                    <span class="day-label">Fri</span>
                                </label>
                                <label class="day-checkbox">
                                    <input type="checkbox" value="5" />
                                    <span class="day-label">Sat</span>
                                </label>
                                <label class="day-checkbox">
                                    <input type="checkbox" value="6" />
                                    <span class="day-label">Sun</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="form-actions">
                        <button type="button" id="clear-form" class="btn-secondary">Clear Form</button>
                        <button type="submit" id="add-task" class="btn-primary">
                            <span class="btn-icon"><i class="fas fa-plus"></i></span>
                            <span class="btn-text">Add Task</span>
                        </button>
                    </div>
                </form>
            </div>
        </section>
            <!-- AI Task Generator Section -->
         <!-- <section id="ai-task-generator-section" class="card-section">
            <div class="section-header">
                <h2><span class="section-icon"><i class="fas fa-robot"></i></span> AI Task Generator</h2>
                <button class="section-toggle collapsed" data-section="ai-task-generator" id="ai-task-toggle-btn">
                    <span class="toggle-arrow">‚ñ∂</span>
                </button>
            </div>
            <div class="section-content collapsed" id="ai-task-generator-content">
                <form id="ai-task-form">
                    <div class="form-section">
                        <h3>Project Details</h3>
                        <div class="form-row">
                            <label for="ai-project-desc">Project Description</label>
                            <textarea id="ai-project-desc" placeholder="Describe your project here (title, context, deadline...)"></textarea>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="submit" id="ai-generate-btn" class="btn-primary" style="display: none;">
                            <span class="btn-icon">‚ú®</span>
                            <span class="btn-text">Generate Tasks</span>
                        </button>
                    </div>
                </form>
                <div id="ai-task-results" class="ai-task-results"></div>
            </div>
        </section>-->
        
        <!-- Week Navigation -->
        <section id="week-navigation" class="week-nav-section">
            <div class="week-nav-container">
                <ul id="day-nav" class="day-nav">
                    <li data-day="0">Monday</li>
                    <li data-day="1">Tuesday</li>
                    <li data-day="2">Wednesday</li>
                    <li data-day="3">Thursday</li>
                    <li data-day="4">Friday</li>
                    <li data-day="5">Saturday</li>
                    <li data-day="6">Sunday</li>
                </ul>
            </div>
        </section>
        
        <!-- Tasks Display Section -->
        <section id="tasks-section" class="card-section">
            <h2 id="tasks-day-title"></h2>
            <div class="tasks-header">
                <button id="delete-all-tasks-btn" class="btn-danger" style="display: none;">
                    <span class="btn-icon"><i class="fas fa-trash-alt"></i></span>
                    <span class="btn-text">Delete All Tasks for Today</span>
                </button>
            </div>
            <!-- Task Search & Filter Controls -->
            <div id="task-search-filter" class="task-search-filter">
                <div class="search-bar-container">
                    <input type="text" id="task-search-input" class="task-search-input" placeholder="üîç Search tasks by title, details, category, or date..." autocomplete="off" />
                </div>
                <div class="filter-controls">
                    <select id="filter-priority" class="filter-dropdown">
                        <option value="">All Priorities</option>
                        <option value="high">High</option>
                        <option value="medium">Medium</option>
                        <option value="low">Low</option>
                    </select>
                    <select id="filter-category" class="filter-dropdown">
                        <option value="">All Categories</option>
                        <!-- Categories will be populated dynamically -->
                    </select>
                    <select id="filter-status" class="filter-dropdown">
                        <option value="">All Statuses</option>
                        <option value="completed">Completed</option>
                        <option value="pending">Pending</option>
                    </select>

                    <button type="button" id="clear-filters-btn" class="clear-filters-btn" title="Clear all filters">‚úñ</button>
                </div>
            </div>
            <ul id="tasks-list"></ul>
        </section>

        <!-- Calendar Section -->
        <section id="calendar-section" class="card-section">
            <div class="section-header">
                <h2><span class="section-icon"><i class="far fa-calendar-alt"></i></span> Task Calendar</h2>
                <button class="section-toggle collapsed" data-section="calendar">
                    <span class="toggle-arrow">‚ñ∂</span>
                </button>
            </div>
            <div class="section-content collapsed" id="calendar-content">
                <div id="calendar-container"></div>
            </div>
        </section>
        
        <!-- Tools Section -->
        <aside id="tools-section" class="card-section">
            <h2><span class="section-icon"><i class="fas fa-tools"></i></span> Tools</h2>
            <div class="tool-buttons-row">
                <button id="export-tasks-btn" class="tool-btn" title="Export all tasks">
                    <span class="icon"><i class="fas fa-file-export"></i></span> Export Tasks
                </button>
                <button id="import-tasks-btn" class="tool-btn" title="Import tasks from file">
                    <span class="icon"><i class="fas fa-file-import"></i></span> Import Tasks
                    <input type="file" id="import-file-input" accept=".json" style="display: none;">
                </button>
                <button id="generate-pdf" class="tool-btn" title="Generate PDF of tasks of the day">
                    <span class="icon"><i class="far fa-file-pdf"></i></span> Download PDF
                </button>
            </div>
            <button id="focus-mode-btn" class="tool-btn">
                <span class="icon"><i class="fas fa-search"></i></span> Focus Mode - Tomodoro technique
            </button>
            
            <!-- Quick Notes Section -->
            <div class="quick-notes-section">
                <div class="quick-notes-header">
                    <h3><span class="notes-icon"><i class="far fa-sticky-note"></i></span> Quick Notes</h3>
                    <button id="add-note-btn" class="add-note-btn" title="Add New Note">
                        <span class="add-icon">+</span>
                    </button>
                </div>
                <div id="quick-notes-container" class="quick-notes-container">
                    <!-- Notes will be dynamically added here -->
                </div>
            </div>
        </aside>

        <!-- Donate Section -->
        <section id="donate-section" class="card-section">
            <div class="section-header">
                <h2><span class="section-icon"><i class="fas fa-heart"></i></span> Support TaskExtreme</h2>
                <button class="section-toggle collapsed" data-section="donate">
                    <span class="toggle-arrow">‚ñ∂</span>
                </button>
            </div>
            <div class="section-content collapsed" id="donate-content">
                <div class="donate-intro">
                    <p>If TaskExtreme has helped you stay organized and productive, consider supporting its development! Your donation helps keep this tool free and continuously improved.</p>
                </div>
                
                <div class="donation-options">
                    <!-- PayPal Option -->
                    <div class="donation-option">
                        <div class="donation-header">
                            <span class="donation-icon">üí≥</span>
                            <h3>PayPal</h3>
                        </div>
                        <div class="donation-content">
                            <p>Quick and secure payment via PayPal</p>
                            <div class="paypal-section">
                                <div class="custom-amount">
                                    <label for="custom-amount">Custom Amount (USD):</label>
                                    <input type="number" id="custom-amount" placeholder="5.00" min="1" step="0.01" value="5.00">
                                </div>
                                <div class="paypal-buttons">
                                    <button class="donate-btn paypal-btn" data-amount="5">
                                        <span class="btn-icon">üí≥</span>
                                        <span class="btn-text">Donate $5</span>
                                    </button>
                                    <button class="donate-btn paypal-btn" data-amount="10">
                                        <span class="btn-icon">üí≥</span>
                                        <span class="btn-text">Donate $10</span>
                                    </button>
                                    <button class="donate-btn paypal-btn" data-amount="20">
                                        <span class="btn-icon">üí≥</span>
                                        <span class="btn-text">Donate $20</span>
                                    </button>
                                    <button class="donate-btn paypal-btn custom" id="paypal-custom-btn">
                                        <span class="btn-icon">üí≥</span>
                                        <span class="btn-text">Donate Custom Amount</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- CIH Bank Option -->
                    <div class="donation-option">
                        <div class="donation-header">
                            <span class="donation-icon">üè¶</span>
                            <h3>CIH Bank Transfer</h3>
                        </div>
                        <div class="donation-content">
                            <p>Direct bank transfer for Moroccan users</p>
                            <div class="bank-details">
                                <div class="bank-info">
                                    <div class="info-row">
                                        <span class="info-label">Bank:</span>
                                        <span class="info-value">CIH Bank</span>
                                    </div>
                                    <div class="info-row">
                                        <span class="info-label">Account Name:</span>
                                        <span class="info-value">MOHAMMED REQASSE</span>
                                    </div>
                                    <div class="info-row">
                                        <span class="info-label">RIB:</span>
                                        <span class="info-value copyable" id="rib-number">230 590 4107758211032400 36</span>
                                        <button class="copy-btn" data-target="rib-number" title="Copy RIB">
                                            <span class="copy-icon">üìã</span>
                                        </button>
                                    </div>
                                    <div class="info-row">
                                        <span class="info-label">IBAN:</span>
                                        <span class="info-value copyable" id="iban-number">MA64 2305 9041 0775 8211 0324 0036</span>
                                        <button class="copy-btn" data-target="iban-number" title="Copy IBAN">
                                            <span class="copy-icon">üìã</span>
                                        </button>
                                    </div>
                                    <div class="info-row">
                                        <span class="info-label">SWIFT:</span>
                                        <span class="info-value copyable" id="swift-code">CIHMMAMC</span>
                                        <button class="copy-btn" data-target="swift-code" title="Copy SWIFT Code">
                                            <span class="copy-icon">üìã</span>
                                        </button>
                                    </div>
                                </div>
                                <div class="qr-section">
                                    <img src="./images/cih-qr-code.png" alt="CIH Bank QR Code" class="qr-code-image">
                                    <small>Scan with your bank's mobile app</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="donate-footer">
                    <p>Thank you for your support! üôè</p>
                    <p><small>Your donations help maintain and improve TaskExtreme for everyone.</small></p>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer id="footer-contact">
        <div class="footer-content">
            <div class="footer-section">
                <div class="profile-section">
                    <img src="https://i.ibb.co/LXLK3D5c/Whats-App-Image-2025-04-11-at-15-03-59-12f7a20f-removebg-preview.png" alt="Mohammed Reqasse" class="profile-image">
                    <div class="profile-info">
                        <h3>Mohammed Reqasse</h3>
                        <p>Network and Telecommunications Engineering Student</p>
                        <a href="https://moreqasse.github.io/CV/" target="_blank" rel="noopener" class="resume-link">View Resume</a>
                    </div>
                </div>
            </div>
            
            <div class="footer-section">
                <h4>Contact Information</h4>
                <div class="contact-links">
                    <a href="mailto:reqasse@gmail.com" class="contact-link">
                        <img src="https://icones.pro/wp-content/uploads/2021/03/icone-gmail-logo-png-grise.png" alt="Email" class="contact-icon">
                        <span>reqasse@gmail.com</span>
                    </a>
                    <a href="tel:+212700821340" class="contact-link">
                        <span class="contact-icon">üìû</span>
                        <span>+212-700-82-13-40</span>
                    </a>
                    <a href="https://wa.me/212700821340" class="contact-link" target="_blank" rel="noopener">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp" class="contact-icon">
                        <span>WhatsApp</span>
                    </a>
                </div>
            </div>
            
            <div class="footer-section">
                <h4>Social Links</h4>
                <div class="social-links">
                    <a href="https://www.linkedin.com/in/mohammed-reqasse-860a03219/" class="social-link" target="_blank" rel="noopener">
                        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQVwpVlXEdO4SYUobUhd4C0DxLhsil1mNLpiw&s" alt="LinkedIn" class="social-icon">
                        <span>LinkedIn</span>
                    </a>
                    <a href="https://github.com/MOREQASSE" class="social-link" target="_blank" rel="noopener">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/9/91/Octicons-mark-github.svg" alt="GitHub" class="social-icon github-icon">
                        <span>GitHub</span>
                    </a>
                </div>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p>&copy; 2025 TaskExtreme. Created by Mohammed Reqasse
                All rights reserved.
            </p>
        </div>
    </footer>

    <!-- Edit Task Modal -->
    <div id="edit-task-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2><span class="section-icon"><i class="fas fa-list-ul"></i></span> Task List</h2>
                <button id="close-edit-modal" class="modal-close-btn">&times;</button>
            </div>
            
            <form id="edit-task-form">
                <input type="hidden" id="edit-task-id" />
                
                <!-- Task Details Section -->
                <div class="form-section">
                    <h3>Task Information</h3>
                    <div class="form-row">
                        <label for="edit-task-title">Task Title *</label>
                        <input type="text" id="edit-task-title" placeholder="What needs to be done?" required />
                    </div>
                    <div class="form-row">
                        <label for="edit-task-details">Description</label>
                        <textarea id="edit-task-details" placeholder="Add any additional details, notes, or context..."></textarea>
                    </div>
                </div>

                <!-- Category & Priority Section -->
                <div class="form-section">
                    <h3>üè∑Ô∏è Category & Priority</h3>
                    <div class="form-row category-priority-row">
                        <div class="category-group">
                            <label for="edit-task-category">Category</label>
                            <select id="edit-task-category" required>
                                <option value="">Select a category</option>
                                <option value="work" data-color="#3b82f6"><i class="fas fa-briefcase"></i> Work</option>
                                <option value="personal" data-color="#10b981"><i class="fas fa-user"></i> Personal</option>
                                <option value="health" data-color="#ef4444"><i class="fas fa-heartbeat"></i> Health</option>
                                <option value="education" data-color="#8b5cf6"><i class="fas fa-graduation-cap"></i> Education</option>
                                <option value="finance" data-color="#f59e0b"><i class="fas fa-money-bill-wave"></i> Finance</option>
                                <option value="home" data-color="#06b6d4"><i class="fas fa-home"></i> Home</option>
                                <option value="social" data-color="#ec4899"><i class="fas fa-users"></i> Social</option>
                                <option value="hobby" data-color="#84cc16"><i class="fas fa-paint-brush"></i> Hobby</option>
                            </select>
                        </div>
                        <div class="priority-group">
                            <label for="edit-task-priority">Priority</label>
                            <select id="edit-task-priority" required>
                                <option value="">Select priority</option>
                                <option value="low" data-color="#10b981"><i class="fas fa-arrow-down"></i> Low</option>
                                <option value="medium" data-color="#f59e0b"><i class="fas fa-equals"></i> Medium</option>
                                <option value="high" data-color="#ef4444"><i class="fas fa-exclamation"></i> High</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Time & Date Section -->
                <div class="form-section">
                    <h3>‚è∞ Time & Date</h3>
                    <div class="form-row time-row">
                        <div class="time-group">
                            <label for="edit-task-time-start">Start Time</label>
                            <input type="time" id="edit-task-time-start" />
                        </div>
                        <div class="time-separator">to</div>
                        <div class="time-group">
                            <label for="edit-task-time-end">End Time</label>
                            <input type="time" id="edit-task-time-end" />
                        </div>
                    </div>
                    <div class="form-row">
                        <label for="edit-task-due-date">Due Date</label>
                        <input type="date" id="edit-task-due-date" />
                    </div>
                </div>

                <!-- Scheduling Section -->
                <div class="form-section">
                    <h3>üìÖ Scheduling</h3>
                    <div class="scheduling-options">
                        <div class="option-group">
                            <label class="option-label">
                                <input type="radio" name="edit-schedule-type" value="once" checked />
                                <span class="option-text">
                                    <span class="option-icon"><i class="fas fa-thumbtack"></i></span>
                                    <span class="option-content">
                                        <strong>One-time task</strong>
                                        <small>Add to current date</small>
                                    </span>
                                </span>
                            </label>
                        </div>
                        
                        <div class="option-group">
                            <label class="option-label">
                                <input type="radio" name="edit-schedule-type" value="everyday" />
                                <span class="option-text">
                                    <span class="option-icon"><i class="fas fa-sync-alt"></i></span>
                                    <span class="option-content">
                                        <strong>Daily repeat</strong>
                                        <small>Every day</small>
                                    </span>
                                </span>
                            </label>
                        </div>
                        
                        <div class="option-group">
                            <label class="option-label">
                                <input type="radio" name="edit-schedule-type" value="custom" />
                                <span class="option-text">
                                    <span class="option-icon">üìã</span>
                                    <span class="option-content">
                                        <strong>Custom repeat</strong>
                                        <small>Select specific days</small>
                                    </span>
                                </span>
                            </label>
                        </div>
                    </div>
                    
                    <div id="edit-custom-days-section" class="custom-days-section" style="display: none;">
                        <label class="section-label">Repeat on:</label>
                        <div class="days-grid">
                            <label class="day-checkbox">
                                <input type="checkbox" value="0" />
                                <span class="day-label">Mon</span>
                            </label>
                            <label class="day-checkbox">
                                <input type="checkbox" value="1" />
                                <span class="day-label">Tue</span>
                            </label>
                            <label class="day-checkbox">
                                <input type="checkbox" value="2" />
                                <span class="day-label">Wed</span>
                            </label>
                            <label class="day-checkbox">
                                <input type="checkbox" value="3" />
                                <span class="day-label">Thu</span>
                            </label>
                            <label class="day-checkbox">
                                <input type="checkbox" value="4" />
                                <span class="day-label">Fri</span>
                            </label>
                            <label class="day-checkbox">
                                <input type="checkbox" value="5" />
                                <span class="day-label">Sat</span>
                            </label>
                            <label class="day-checkbox">
                                <input type="checkbox" value="6" />
                                <span class="day-label">Sun</span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="form-actions">
                    <button type="button" id="cancel-edit" class="btn-secondary">Cancel</button>
                    <button type="submit" id="save-task" class="btn-primary">
                        <span class="btn-icon"><i class="fas fa-save"></i></span>
                        <span class="btn-text">Save Changes</span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Notification Container -->
    <div id="notification-container" class="notification-container"></div>

    <!-- Mobile Bottom Navigation -->
    <nav class="mobile-bottom-nav">
        <ul class="mobile-nav-items">
            <li>
                <a href="#home" class="mobile-nav-item">
                    <i class="fas fa-home"></i>
                    <span class="mobile-nav-text">Home</span>
                </a>
            </li>
            <li>
                <a href="#progress-dashboard-section" class="mobile-nav-item">
                    <i class="fas fa-chart-bar"></i>
                    <span class="mobile-nav-text">Dashboard</span>
                </a>
            </li>
            <li>
                <a href="#calendar-section" class="mobile-nav-item">
                    <i class="far fa-calendar-alt"></i>
                    <span class="mobile-nav-text">Calendar</span>
                </a>
            </li>
            <li>
                <a href="#task-form-section" class="mobile-nav-item">
                    <i class="fas fa-plus-circle"></i>
                    <span class="mobile-nav-text">New Task</span>
                </a>
            </li>
            <li>
                <a href="#tools-section" class="mobile-nav-item">
                    <i class="fas fa-tools"></i>
                    <span class="mobile-nav-text">Tools</span>
                </a>
            </li>
            <li>
                <a href="#donate-section" class="mobile-nav-item donate-nav">
                    <i class="fas fa-heart"></i>
                    <span class="mobile-nav-text">Donate</span>
                </a>
            </li>
        </ul>
    </nav>

    <!-- Scripts in correct order -->
    <script src="./scripts/theme.js"></script>
    <script src="./js/scroll-spy.js"></script>
    <script src="./scripts/collapsible-sections.js"></script>
    <script src="./scripts/progress-dashboard.js"></script>
    <script src="./scripts/drag-drop.js"></script>
    <script src="./scripts/pdf-export.js"></script>
    <script src="./scripts/ai-client.js"></script>
    <script src="./scripts/app.js"></script>
    <script src="./scripts/calendar2.js"></script>
    <script src="./scripts/focus-mode.js"></script>
    <script src="./scripts/quick-notes.js"></script>
    <script src="./scripts/donate.js"></script>
    <script>
    // Drag-and-drop and file name display for file upload
    const fileInput = document.getElementById('ai-project-file');
    </script>
    <script src="./scripts/file-to-task.js"></script>
    <script src="./scripts/templates-dropdown.js"></script>
    <script>
    // (reopen script for following JS)
    const dropzone = document.getElementById('file-upload-dropzone');
    const fileNameDisplay = document.getElementById('selected-file-name');

    if (fileInput && dropzone && fileNameDisplay) {
        // Click on dropzone opens file picker
        dropzone.addEventListener('click', (e) => {
            if (e.target === dropzone || e.target.classList.contains('file-upload-text') || e.target.classList.contains('file-upload-icon')) {
                fileInput.click();
            }
        });
        // Show selected file name
        fileInput.addEventListener('change', () => {
            if (fileInput.files && fileInput.files.length > 0) {
                fileNameDisplay.textContent = fileInput.files[0].name;
            } else {
                fileNameDisplay.textContent = 'Choose a file or drag it here';
            }
        });
        // Drag and drop support
        ['dragenter', 'dragover'].forEach(eventName => {
            dropzone.addEventListener(eventName, (e) => {
                e.preventDefault();
                e.stopPropagation();
                dropzone.classList.add('dragover');
            });
        });
        ['dragleave', 'drop'].forEach(eventName => {
            dropzone.addEventListener(eventName, (e) => {
                e.preventDefault();
                e.stopPropagation();
                dropzone.classList.remove('dragover');
            });
        });
        dropzone.addEventListener('drop', (e) => {
            if (e.dataTransfer && e.dataTransfer.files && e.dataTransfer.files.length > 0) {
                fileInput.files = e.dataTransfer.files;
                fileInput.dispatchEvent(new Event('change'));
            }
        });
    }

    // Show/hide Generate Tasks button based on section toggle (robust with MutationObserver)
    const aiSectionContent = document.getElementById('ai-task-generator-content');
    const aiGenerateBtn = document.getElementById('ai-generate-btn');

    function updateAIGenerateBtnVisibility() {
        if (aiSectionContent && aiGenerateBtn) {
            if (!aiSectionContent.classList.contains('collapsed')) {
                aiGenerateBtn.style.display = '';
            } else {
                aiGenerateBtn.style.display = 'none';
            }
        }
    }
    // Initial state
    updateAIGenerateBtnVisibility();
    // Observe class changes
    if (aiSectionContent && aiGenerateBtn && window.MutationObserver) {
        const observer = new MutationObserver(updateAIGenerateBtnVisibility);
        observer.observe(aiSectionContent, { attributes: true, attributeFilter: ['class'] });
    }

    // Function to enhance select dropdown with icons
    function enhanceSelectWithIcons(selectId) {
        const select = document.getElementById(selectId);
        if (!select) return;

        // Create a custom dropdown container
        const customSelect = document.createElement('div');
        customSelect.className = 'custom-select';
        
        // Create the selected item display
        const selected = document.createElement('div');
        selected.className = 'select-selected';
        selected.innerHTML = `
            <div class="select-selected-content">
                <i class="fas ${select.options[0].dataset.icon || ''}"></i>
                <span>${select.options[0].text}</span>
            </div>
            <span class="select-arrow">‚ñº</span>
        `;
        
        // Create the dropdown items container
        const itemsContainer = document.createElement('div');
        itemsContainer.className = 'select-items select-hide';
        
        // Add options to the dropdown
        for (let i = 0; i < select.options.length; i++) {
            const option = select.options[i];
            const item = document.createElement('div');
            item.className = 'select-item';
            const iconColor = option.dataset.iconColor ? ` style="color: ${option.dataset.iconColor}"` : '';
            item.innerHTML = `<i class="fas ${option.dataset.icon || ''}"${iconColor}></i> <span>${option.text}</span>`;
            item.dataset.value = option.value;
            
            // Set click handler for each item
            item.addEventListener('click', function() {
                // Update the original select
                select.selectedIndex = i;
                
                // Update the selected display
                const icon = this.querySelector('i').className;
                const iconColor = this.querySelector('i').style.color ? ` style="color: ${this.querySelector('i').style.color}"` : '';
                const text = this.querySelector('span').textContent;
                selected.innerHTML = `
                    <div class="select-selected-content">
                        <i class="${icon}"${iconColor}></i>
                        <span>${text}</span>
                    </div>
                    <span class="select-arrow">‚ñº</span>
                `;
                
                // Close the dropdown
                itemsContainer.classList.add('select-hide');
                
                // Trigger change event
                const event = new Event('change');
                select.dispatchEvent(event);
            });
            
            itemsContainer.appendChild(item);
        }
        
        // Toggle dropdown on click
        selected.addEventListener('click', function(e) {
            e.stopPropagation();
            itemsContainer.classList.toggle('select-hide');
        });
        
        // Close dropdown when clicking outside
        document.addEventListener('click', function() {
            itemsContainer.classList.add('select-hide');
        });
        
        // Assemble the custom select
        customSelect.appendChild(selected);
        customSelect.appendChild(itemsContainer);
        
        // Insert the custom select after the original select and hide the original
        select.parentNode.insertBefore(customSelect, select.nextSibling);
        select.style.display = 'none';
        
        // Update the custom select when the original select changes
        select.addEventListener('change', function() {
            const selectedOption = this.options[this.selectedIndex];
            const iconColor = selectedOption.dataset.iconColor ? ` style="color: ${selectedOption.dataset.iconColor}"` : '';
            selected.innerHTML = `
                <div class="select-selected-content">
                    <i class="fas ${selectedOption.dataset.icon || ''}"${iconColor}></i>
                    <span>${selectedOption.text}</span>
                </div>
                <span class="select-arrow">‚ñº</span>
            `;
        });
    }
    
    // Initialize the enhanced select when the DOM is loaded
    // Export tasks to JSON file
    function exportTasks() {
        try {
            const tasks = JSON.parse(localStorage.getItem('taskextreme_tasks') || '[]');
            const checked = JSON.parse(localStorage.getItem('taskextreme_checked') || '{}');
            
            if (tasks.length === 0) {
                showNotification('No tasks to export', 'info');
                return;
            }
            
            const exportData = {
                version: '1.0',
                exportedAt: new Date().toISOString(),
                tasks: tasks,
                checked: checked
            };
            
            const dataStr = JSON.stringify(exportData, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `TaskExtreme-Tasks-${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showNotification('Tasks exported successfully!', 'success');
        } catch (error) {
            console.error('Error exporting tasks:', error);
            showNotification('Failed to export tasks', 'error');
        }
    }
    
    // Import tasks from JSON file
    function importTasks(file) {
        return new Promise((resolve, reject) => {
            const reader = new FileReader();
            
            reader.onload = (event) => {
                try {
                    const data = JSON.parse(event.target.result);
                    
                    // Validate the imported data
                    if (!data.tasks || !Array.isArray(data.tasks)) {
                        throw new Error('Invalid file format: tasks array not found');
                    }
                    
                    // Get existing tasks
                    const existingTasks = JSON.parse(localStorage.getItem('taskextreme_tasks') || '[]');
                    const existingChecked = JSON.parse(localStorage.getItem('taskextreme_checked') || '{}');
                    
                    // Merge tasks (skip duplicates by ID)
                    const existingTaskIds = new Set(existingTasks.map(t => t.id));
                    const newTasks = data.tasks.filter(task => !existingTaskIds.has(task.id));
                    
                    if (newTasks.length === 0) {
                        resolve({ imported: 0, total: data.tasks.length, message: 'No new tasks to import' });
                        return;
                    }
                    
                    // Add new tasks
                    const updatedTasks = [...existingTasks, ...newTasks];
                    
                    // Merge checked status
                    const updatedChecked = { ...existingChecked, ...(data.checked || {}) };
                    
                    // Save to localStorage
                    localStorage.setItem('taskextreme_tasks', JSON.stringify(updatedTasks));
                    localStorage.setItem('taskextreme_checked', JSON.stringify(updatedChecked));
                    
                    resolve({
                        imported: newTasks.length,
                        total: data.tasks.length,
                        message: `Imported ${newTasks.length} of ${data.tasks.length} tasks`
                    });
                } catch (error) {
                    console.error('Error importing tasks:', error);
                    reject(new Error('Invalid or corrupted file. Please check the file format.'));
                }
            };
            
            reader.onerror = () => {
                reject(new Error('Error reading file'));
            };
            
            reader.readAsText(file);
        });
    }
    
    // Show notification to user
    function showNotification(message, type = 'info') {
        // Define icons for different notification types
        const icons = {
            success: 'check-circle',
            error: 'exclamation-circle',
            warning: 'exclamation-triangle',
            info: 'info-circle'
        };

        // Create notification element
        const notification = document.createElement('div');
        notification.className = `notification notification-${type}`;
        
        // Set notification content
        notification.innerHTML = `
            <i class="fas fa-${icons[type] || 'info-circle'} notification-icon"></i>
            <div class="notification-content">${message}</div>
            <button class="notification-close">&times;</button>
            <div class="notification-progress"></div>
        `;
        
        // Get notification container or create it if it doesn't exist
        let container = document.getElementById('notification-container');
        if (!container) {
            container = document.createElement('div');
            container.id = 'notification-container';
            container.className = 'notification-container';
            document.body.appendChild(container);
        }
        
        // Add notification to container
        container.insertBefore(notification, container.firstChild);
        
        // Show notification with animation
        setTimeout(() => {
            notification.classList.add('show');
            
            // Animate progress bar
            const progress = notification.querySelector('.notification-progress');
            if (progress) {
                progress.style.transform = 'scaleX(0)';
                progress.style.transition = 'transform 4s linear';
            }
        }, 10);
        
        // Auto-remove notification after delay
        const autoRemoveTime = type === 'error' ? 8000 : 5000;
        let removeTimeout = setTimeout(() => {
            hideNotification(notification);
        }, autoRemoveTime);
        
        // Close on click
        const closeBtn = notification.querySelector('.notification-close');
        if (closeBtn) {
            closeBtn.addEventListener('click', () => {
                clearTimeout(removeTimeout);
                hideNotification(notification);
            });
        }
        
        // Pause auto-remove on hover
        notification.addEventListener('mouseenter', () => {
            clearTimeout(removeTimeout);
            if (progress) {
                progress.style.transition = 'none';
                progress.style.transform = 'scaleX(1)';
            }
        });
        
        // Resume auto-remove when mouse leaves
        notification.addEventListener('mouseleave', () => {
            const remainingWidth = progress ? progress.offsetWidth / notification.offsetWidth : 1;
            const remainingTime = remainingWidth * autoRemoveTime;
            
            removeTimeout = setTimeout(() => {
                hideNotification(notification);
            }, remainingTime);
            
            if (progress) {
                progress.style.transition = `transform ${remainingTime}ms linear`;
                progress.style.transform = 'scaleX(0)';
            }
        });
        
        // Function to hide notification with animation
        function hideNotification(notification) {
            notification.classList.remove('show');
            notification.classList.add('hide');
            
            // Remove from DOM after animation
            notification.addEventListener('transitionend', () => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, { once: true });
        }
    }
    
    // Initialize event listeners when DOM is loaded
    document.addEventListener('DOMContentLoaded', function() {
        // Initialize enhanced selects
        enhanceSelectWithIcons('task-category');
        enhanceSelectWithIcons('task-priority');
        
        // Export button click handler
        const exportBtn = document.getElementById('export-tasks-btn');
        if (exportBtn) {
            exportBtn.addEventListener('click', exportTasks);
        }
        
        // Import button click handler
        const importBtn = document.getElementById('import-tasks-btn');
        const fileInput = document.getElementById('import-file-input');
        
        if (importBtn && fileInput) {
            // Click the hidden file input when import button is clicked
            importBtn.addEventListener('click', () => {
                fileInput.click();
            });
            
            // Handle file selection
            fileInput.addEventListener('change', async (e) => {
                const file = e.target.files[0];
                if (!file) return;
                
                // Check file type
                if (!file.name.endsWith('.json')) {
                    showNotification('Please select a JSON file', 'error');
                    return;
                }
                
                // Show confirmation dialog
                const confirmImport = confirm('Importing tasks will add them to your existing tasks. Continue?');
                if (!confirmImport) {
                    fileInput.value = ''; // Reset file input
                    return;
                }
                
                try {
                    const result = await importTasks(file);
                    showNotification(result.message || 'Tasks imported successfully!', 'success');
                    
                    // Refresh the UI if needed
                    if (window.renderTasks) {
                        window.renderTasks();
                    }
                } catch (error) {
                    console.error('Import error:', error);
                    showNotification(error.message || 'Failed to import tasks', 'error');
                } finally {
                    // Reset file input
                    fileInput.value = '';
                }
            });
        }
    });
    </script>
    
    <style>
    /* Tool Buttons Row */
    .tool-buttons-row {
        display: flex;
        gap: 10px;
        margin-bottom: 1rem;
    }
    
    .tool-buttons-row .tool-btn {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        padding: 0.6rem 0.8rem;
        font-size: 0.9rem;
    }
    
    .tool-buttons-row .tool-btn .icon {
        font-size: 0.9em;
    }
    
    /* Import/Export specific styles */
    #import-tasks-btn {
        position: relative;
        overflow: hidden;
    }
    
    #import-file-input {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        cursor: pointer;
    }
    
    /* Custom select styles */
    .custom-select {
        position: relative;
        width: 100%;
        margin-bottom: 1rem;
    }
    
    .select-selected {
        background-color: var(--primary);
        border: 1px solid var(--border);
        border-radius: 4px;
        padding: 0.5rem 1rem;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: space-between;
        transition: all 0.2s ease;
    }
    
    .select-selected-content {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        flex: 1;
    }
    
    .select-arrow {
        font-size: 0.7em;
        opacity: 0.7;
        transition: transform 0.2s ease;
    }
    
    .select-selected:hover .select-arrow {
        opacity: 1;
    }
    
    .select-items:not(.select-hide) + .select-selected .select-arrow {
        transform: rotate(180deg);
    }
    
    .select-selected:hover {
        border-color: var(--accent);
    }
    
    .select-items {
        position: absolute;
        background-color: var(--primary);
        border: 1px solid var(--border);
        border-radius: 4px;
        margin-top: 0.25rem;
        width: 100%;
        max-height: 200px;
        overflow-y: auto;
        z-index: 1000;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    
    .select-item {
        padding: 0.5rem 1rem;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }
    
    .select-item:hover {
        background-color: var(--secondary);
        color: var(--accent);
    }
    
    .select-hide {
        display: none;
    }
    
    .select-items div:first-child {
        border-top-left-radius: 4px;
        border-top-right-radius: 4px;
    }
    
    .select-items div:last-child {
        border-bottom-left-radius: 4px;
        border-bottom-right-radius: 4px;
    }
    </style>
</body>
</html>